<% content_for :hero_title, "Find a Rental".html_safe %> <!-- Hero/Page Title -->
<% content_for :lede, "Search for a rental at Rocky Point".html_safe %>
<section class="padded-top scallop-top beige-bg">
    <div class="layout-container">
        <div class="property-search">
            <%= form_tag(accommodations_path, class: 'gw no-gutter', method: :get) do %>
                <fieldset class="g sm-one-whole md-five-twelfths">
                    <label class="is-visually-hidden">Rooms</label>
                    <div class="select-style">
                        <select name="id" id="select-drop" value="">
                            <option disabled selected class="drop-options" >Rooms</option>
                            <option id="HCNDA" value="1911-89478" class="drop-options" >Any</option>
                            <option id="HCNDA" value="1911-89478" class="drop-options" >Entire Complex</option>
                            <option id="HPLCN" value="1911-89481" class="drop-options">El Pelicano</option>
                            <option id="HSALA" value="1911-89483" class="drop-options">La Sala</option>
                            <option id="HPLMA" value="1911-89482" class="drop-options">La Paloma</option>
                            <option id="HCHUP" value="1911-89477" class="drop-options">La Chuparosa</option>
                            <option id="HCRT1" value="1911-89479" class="drop-options">Courtyard 1</option>
                            <option id="HCRT2" value="1911-89480" class="drop-options">Courtyard 2</option>
                            <option id="HAGUI" value="1911-112148" class="drop-options">La Aguila</option>
                        </select>
                    </div>
                </fieldset>
                <fieldset class="g sm-one-third md-one-seventh">
                    <input id="start_date" readonly="readonly" class="no-borders datepicker arrival-date" type="text" name="start_date" placeholder="Arrive" autocomplete="off">
                </fieldset>
                <fieldset class="g sm-one-third md-one-seventh">
                    <input id="end_date" readonly="readonly" class="no-borders datepicker depart-date" type="text" name="end_date" placeholder="Depart" autocomplete="off">
                </fieldset>
                <fieldset class="g sm-one-fourth md-one-eighth text-align-right">
                    <label class="is-visually-hidden" for="guests">Guests</label>
                    <div class="select-style">
                        <select name="guests" id="guests">
                            <option disabled selected>Guests</option>
                            <option value="all">Any</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                        </select>
                    </div>
                </fieldset>
                <footer class="g md-two-twelfths">
                  <input class="btn btn--brown no-min-width max-width search-btn" type="submit" value="Search">
                </footer>
            <% end %>
        </div>
    </div>
    <%- if @units.empty? %>
    <div class="layout-container-smaller padded-bottom layout-centered">
        <h1>No available rental properties found</h1>
        <p>Please adjust your search and try again.</p>
    </div>
    <%- else %>
    <div class="layout-container">
        <ul class="properties-list gw small-gutter">
            <%- @units.each do |unit| %>
            <li class="property g sm-one-half md-one-whole">

                <%
                full_link = accommodation_url(unit.code) + "?start_date=#{@start_date}&end_date=#{@end_date}&guests=#{@guests}"
                %>

                <a href="<%= full_link %>"><img class="property-thumb" src="<%= unit.standard_images[0][:url] %>"></a>
                <div class="details">
                    <div class="gw small-gutter">
                        <div class="g md-three-eighths">
                            <h2><a href="<%= full_link %>"><%= unit.name %></a></h2>
                            <p class="location"><%= unit.address.street %> <br><%= unit.address.city %>, <%= unit.address.country %></p>
                        </div>
                        <div class="g md-three-eighths">
                            <ul class="offerings">
                                <li>
                                    <i class="icon icon-bath"></i>
                                    <span class="detail"><%= unit.bathrooms %> bath</span>
                                </li>
                                <li>
                                    <i class="icon icon-bed"></i>
                                    <span class="detail"><%= unit.bedrooms %> beds</span>
                                </li>
                                <li>
                                    <i class="icon icon-guests"></i>
                                    <span class="detail"><%= unit.occupancy %> guests</span>
                                </li>
                            </ul>
                        </div>
                        <div class="g md-two-eighths">
                            <span class="price"></span>
                            <span class="type"><%= unit.type %></span>
                        </div>
                    </div>
                </div>
            </li>
            <%- end %>

        </ul>
        <div class="pagination pagination-centered">
        <%= will_paginate @units, previous_label: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.3 32.6"><polygon points="16.3,32.6 0,16.3 16.3,0"/></svg>',
                                  next_label: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.3 32.6"><polygon points="0,0 16.3,16.3 0,32.6"/></svg>' %>
        <%- end %>
        </div>
    </div>
</section>

